---
title: 人员信息管理系统接口说明文档
date: 2023-10-03 11:50:25
tags:
  - Node
categories:
  - Node
---

## 说明

1. 项目的请求根路径为：`http://127.0.0.1`

2. 以 `/api` 开头的请求路径，不需要访问权限

3. 以 /my 开头的请求路径，需要在请求头中携带 Authorization 身份认证字段，才能正常访问成功

> 推荐一款 VSCode 主题： escook-theme

> 推荐一款 VSCode 单词翻译插件： escook-translate

## 登录注册

### 注册

**简要描述**

+ 用户注册接口

**请求URL**

+ `http://127.0.0.1/api/reguser`

**请求方式**

+ POST

**请求体**

| 参数名    | 必选 | 类型   | 说明   |
| --------- | ---- | ------ | ------ |
| username  | 是   | string | 用户名 |
| password  | 是   | string | 密码   |

**返回示例**

```js
{
	"status": 0,
	"message": "注册成功！"
}
```

**返回参数说明**

| 参数名   | 类型   | 说明                                         |
| -------- | ------ | -------------------------------------------- |
| status   | int    | 请求是否成功，0：成功；1：失败               |
| message  | string | 请求结果的描述消息                           |

### 登录

**简要描述**

+ 用户登录接口

**请求URL**

+ `http://127.0.0.1/api/login`

**请求方式**

+ POST

**请求体**

| 参数名    | 必选 | 类型   | 说明   |
| --------- | ---- | ------ | ------ |
| username  | 是   | string | 用户名 |
| password  | 是   | string | 密码   |

**返回示例**

```js
{
	"status": 0,
	"message": "登陆成功",
	"token": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwidXNlcm5hbWUiOiJhZG1pbiIsInBhc3N3b3JkIjoibnVsbCIsIm5pY2tuYW1lIjoiR0NUIiwiZW1haWwiOiIxNjEyNjc0MDE4QHFxLmNvbSIsInVzZXJfcGljIjoiIiwicm9sZSI6IueuoeeQhuWRmCIsImRlcGFydG1lbnRfaWQiOjEsImlhdCI6MTWq2YGuo6paNrw4f9SZqkcB8tCN5XU9g7DfQ.0kUJYcwEj9LYJcDCqjhb225f2IGNi_5_Fw271BBFXT4"
}
```

**返回参数说明**

| 参数名   | 类型   | 说明                                         |
| -------- | ------ | -------------------------------------------- |
| status   | int    | 请求是否成功，0：成功；1：失败               |
| message  | string | 请求结果的描述消息                           |
| token | string | 用于有权限接口的身份认证 |

## 个人中心

### 获取用户的基本信息

**简要描述**

+ 获取用户基本信息接口

**请求URL**

+ `http://127.0.0.1/my/userinfo`

**请求方式**

+ GET

**header:**

```js
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywidXNlcm5hbWUiOiIyOTQ2MjgyMDE2IiwicGFzc3dvcmQiOiJudWxsIiwibmlja25hbWUiOm51bGwsImVtYWlsIjpudWxsLCJ1c2VyX3BpYyI6IiIsInJvbGUiOm51bGwsImRlcGFydG1lbnRfaWQiOm51bGwsImlhdCI6MTY5NjMwNzAyMiwiZXhwIjoxNjk2MzQzMDIyfQ.6kUcx7z8PGKOm8WnMVA4NokdPHLbaBQ1aj0i7PYCWuQ
```

**参数**

无

**返回示例**

```js
{
	"status": 0,
	"message": "获取用户基本信息成功！",
	"data": {
		"user_id": 3,
		"username": "2946282016",
		"nickname": null,
		"email": null,
		"role": null,
		"department_name": null,
		"full_name": null,
		"position": null,
		"phone": null,
		"hire_date": null,
		"base_salary": null,
		"bonus": null,
		"deductions": null,
		"salary_month": null
	}
}
```

**返回参数说明**

| 参数名            | 类型      | 说明                            |
| ----------------- | --------- | ------------------------------- |
| status            | int       | 请求状态，0 表示成功，1 表示失败 |
| message           | string    | 请求结果的描述消息               |
| user_id           | int       | 用户 ID                          |
| username          | string    | 用户名                           |
| nickname          | string?   | 用户昵称                         |
| email             | string?   | 用户电子邮件                     |
| role              | string?   | 用户角色                         |
| department_name   | string?   | 用户所在部门名                   |
| full_name         | string?   | 用户全名                         |
| position          | string?   | 用户职位                         |
| phone             | string?   | 用户电话                         |
| hire_date         | date?     | 用户的雇佣日期                   |
| base_salary       | float?    | 用户的基本工资                   |
| bonus             | float?    | 用户的奖金                       |
| deductions        | float?    | 扣除金额                         |
| salary_month      | float?    | 月薪                            |

### 更新用户基本信息

**简要说明：**

+ 更新用户基本信息

**请求URL：**

+ `http://127.0.0.1/my/userinfo`

**请求方式**

+ POST

**Header：**

```js
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MywidXNlcm5hbWUiOiIyOTQ2MjgyMDE2IiwicGFzc3dvcmQiOiJudWxsIiwibmlja25hbWUiOm51bGwsImVtYWlsIjpudWxsLCJ1c2VyX3BpYyI6IiIsInJvbGUiOm51bGwsImRlcGFydG1lbnRfaWQiOm51bGwsImlhdCI6MTY5NjMwNzAyMiwiZXhwIjoxNjk2MzQzMDIyfQ.6kUcx7z8PGKOm8WnMVA4NokdPHLbaBQ1aj0i7PYCWuQ
```

**请求体：**

| 参数名    | 必选 | 类型   | 说明   |
| --------- | ---- | ------ | ------ |
| id        | 是   | number | 用户id |
| nickname  | 是   | string | 昵称   |
| email     | 是   | string | 邮箱   |

**返回示例：**

```js
{
	"status": 0,
	"message": "修改用户基本信息成功！"
}
```

**返回参数说明**

| 参数名   | 类型   | 说明                                         |
| -------- | ------ | -------------------------------------------- |
| status   | int    | 请求是否成功，0：成功；1：失败               |
| message  | string | 请求结果的描述消息                           |


### 重置用户密码

**简要说明：**
- 为指定用户重置密码。

**请求URL：**
- `http://127.0.0.1/my/updatepwd`

**请求方式：**
- POST

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```
> **注意:** Bearer Token 会随每次请求改变，因此在上述代码中的 `<Your-Token-Here>` 需要被替换为实际的token。

**请求体：**
| 参数名   | 必选 | 类型   | 说明      |
| -------- | ---- | ------ | --------- |
| oldPwd       | 是   | number | 旧密码    |
| newPwd | 是   | number | 新密码    |

**返回示例：**
```json
{
	"status": 0,
	"message": "更新密码成功！"
}
```

**返回参数说明：**
| 参数名  | 类型   | 说明                              |
| ------- | ------ | --------------------------------- |
| status  | int    | 请求是否成功，0：成功；1：失败    |
| message | string | 请求结果的描述消息                |

### 更新用户头像

**简要说明：**
- 允许用户更新其个人头像。

**请求URL：**
- `http://127.0.0.1/my/update/avatar`

**请求方式：**
- POST

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```
> **注意:** Bearer Token 会随每次请求改变，因此在上述代码中的 `<Your-Token-Here>` 需要被替换为实际的token。

**请求体：**
| 参数名   | 必选 | 类型     | 说明         |
| -------- | ---- | -------- | ------------ |
| avatar   | 是   | formData | 用户的新头像 |

> **注意:** 头像通常作为文件上传，因此数据类型为 `formData`，这要求使用 multipart/form-data 的内容类型。

**返回示例：**
```json
{
	"status": 0,
	"message": "头像更新头像成功！",
}
```

**返回参数说明：**
| 参数名     | 类型   | 说明                                      |
| ---------- | ------ | ----------------------------------------- |
| status     | int    | 请求是否成功，0：成功；1：失败            |
| message    | string | 请求结果的描述消息                        |

## 部门

### 获取部门列表

**简要说明：**
- 获取系统中所有部门的列表信息。

**请求URL：**
- `http://127.0.0.1/my/department/departments`

**请求方式：**
- GET

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```
> **注意:** Bearer Token 会随每次请求改变，因此在上述代码中的 `<Your-Token-Here>` 需要被替换为实际的token。

**请求参数：**
无

**返回示例：**
```json
{
	"status": 0,
	"message": "获取部门列表成功！",
	"data": [
		{
			"id": 1,
			"department_name": "Department 1",
			"manager_id": 1,
			"is_delete": 0
		},
		{
			"id": 3,
			"department_name": "Department 3",
			"manager_id": null,
			"is_delete": 0
		},
		{
			"id": 4,
			"department_name": "Department 4",
			"manager_id": null,
			"is_delete": 0
		}
	]
}
```

**返回参数说明：**

| 参数名             | 类型       | 说明                                   |
| ------------------ | ---------- | -------------------------------------- |
| status             | int        | 请求是否成功，0：成功；1：失败         |
| message            | string     | 请求结果的描述消息                     |
| data               | array      | 部门的列表数据                         |
| data[].id          | number     | 部门的ID号                             |
| data[].department_name | string  | 部门的名称                             |
| data[].manager_id  | number/null| 负责该部门的经理的ID号，若无则为null   |
| data[].is_delete   | int        | 部门的删除状态，0：未删除；1：已删除   |

### 获取特定部门信息

**简要说明：**
- 根据部门ID获取特定部门的详细信息。

**请求URL：**
- `http://127.0.0.1/my/department/departments/2`

**请求方式：**
- GET

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```
> **注意:** Bearer Token 会随每次请求改变，因此在上述代码中的 `<Your-Token-Here>` 需要被替换为实际的token。

**请求参数：**
无 (参数已经包含在URL路径中)

**返回示例：**
```json
{
	"status": 0,
	"message": "获取部门数据成功！",
	"data": {
		"id": 2,
		"department_name": "Department 2",
		"manager_id": null,
		"is_delete": 1
	}
}
```

**返回参数说明：**
| 参数名             | 类型       | 说明                                   |
| ------------------ | ---------- | -------------------------------------- |
| status             | int        | 请求是否成功，0：成功；1：失败         |
| message            | string     | 请求结果的描述消息                     |
| data               | object     | 部门的详细数据                         |
| data.id            | number     | 部门的ID号                             |
| data.department_name | string   | 部门的名称                             |
| data.manager_id    | number/null| 负责该部门的经理的ID号，若无则为null   |
| data.is_delete     | int        | 部门的删除状态，0：未删除；1：已删除   |

### 删除特定部门

**简要说明：**
- 根据部门ID删除特定部门。

**请求URL：**
- `http://127.0.0.1/my/department/deletedepartments/2`

**请求方式：**
- DELETE

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```
> **注意:** Bearer Token 会随每次请求改变，因此在上述代码中的 `<Your-Token-Here>` 需要被替换为实际的token。

**请求参数：**
无 (参数已经包含在URL路径中)

**返回示例：**
```json
{
	"status": 0,
	"message": "删除部门成功！"
}
```

**返回参数说明：**
| 参数名     | 类型   | 说明                              |
| ---------- | ------ | --------------------------------- |
| status     | int    | 请求是否成功，0：成功；其他：失败 |
| message    | string | 请求结果的描述消息                |

### 新增部门分类

**简要说明：**
- 在系统中新增部门分类。

**请求URL：**
- `http://127.0.0.1/my/department/adddepartments`

**请求方式：**
- POST

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```
> **注意:** Bearer Token 会随每次请求改变，因此在上述代码中的 `<Your-Token-Here>` 需要被替换为实际的token。

**请求体：**
| 参数名   | 必选 | 类型     | 说明         |
| -------- | ---- | -------- | ------------ |
| department_name  | 是   | string | 新增部门名称 |

**返回示例：**
```json
{
	"status": 0,
	"message": "新增部门分类成功！"
}
```

**返回参数说明：**
| 参数名   | 类型   | 说明                            |
| -------- | ------ | ------------------------------- |
| status   | int    | 请求是否成功，0：成功           |
| message  | string | 请求结果的描述消息              |

### 更新部门名称

**简要说明：**
- 在系统中更新已有部门的名称。

**请求URL：**
- `http://127.0.0.1/my/department/updatedepartment`

**请求方式：**
- POST

**Header：**
```plaintext
Authorization: Bearer <Your-Token-Here>
```

**请求体：**
| 参数名   | 必选 | 类型     | 说明         |
| -------- | ---- | -------- | ------------ |
| id  | 是   | number | 更新部门ID |
| department_name  | 是   | string | 更新部门名称 |

**返回示例：**
```json
{
	"status": 0,
	"message": "更新部门名称成功!"
}
```

**返回参数说明：**
| 参数名   | 类型   | 说明                            |
| -------- | ------ | ------------------------------- |
| status   | int    | 请求是否成功，0：成功           |
| message  | string | 请求结果的描述消息              |